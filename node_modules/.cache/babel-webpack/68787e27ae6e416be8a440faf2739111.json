{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/photo/content.service\";\nimport * as i2 from \"src/app/user/user.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\n\nfunction CreateComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"section\", 13);\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" Server Error -> \", ctx_r0.errorMessage, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"autohide in \", ctx_r0.time, \"\");\n  }\n}\n\nfunction CreateComponent_ng_container_10_p_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 15);\n    i0.ɵɵtext(1, \"Photo title is required!\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CreateComponent_ng_container_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CreateComponent_ng_container_10_p_1_Template, 2, 0, \"p\", 14);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r2 = i0.ɵɵreference(9);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r2.errors == null ? null : _r2.errors.required);\n  }\n}\n\nfunction CreateComponent_ng_container_16_p_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 15);\n    i0.ɵɵtext(1, \"Photo Description is required!\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CreateComponent_ng_container_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CreateComponent_ng_container_16_p_1_Template, 2, 0, \"p\", 14);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r4 = i0.ɵɵreference(15);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r4.errors == null ? null : _r4.errors.required);\n  }\n}\n\nfunction CreateComponent_ng_container_22_p_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 15);\n    i0.ɵɵtext(1, \"imageUrl is required!\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CreateComponent_ng_container_22_p_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 15);\n    i0.ɵɵtext(1, \"Please enter a valid URL ( http:// or https:// )\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CreateComponent_ng_container_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CreateComponent_ng_container_22_p_1_Template, 2, 0, \"p\", 14);\n    i0.ɵɵtemplate(2, CreateComponent_ng_container_22_p_2_Template, 2, 0, \"p\", 14);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r6 = i0.ɵɵreference(21);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r6.errors == null ? null : _r6.errors.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r6.errors == null ? null : _r6.errors.pattern);\n  }\n}\n\nexport let CreateComponent = /*#__PURE__*/(() => {\n  class CreateComponent {\n    constructor(contentService, userService, router) {\n      this.contentService = contentService;\n      this.userService = userService;\n      this.router = router;\n      this.errorMessage = '';\n      this.time = 5;\n    }\n\n    create(form) {\n      const title = form.value.title;\n      const description = form.value.description;\n      const imageUrl = form.value.imageUrl;\n      const userInfo = this.userService.userInfo;\n      const userId = userInfo._id;\n      this.contentService.create({\n        title,\n        description,\n        imageUrl,\n        owner: userId\n      }).subscribe({\n        next: photo => {\n          this.photo = photo;\n          this.router.navigate(['/']);\n        },\n        error: error => {\n          this.errorMessage = error.error;\n          console.error('An error occure -> ', this.errorMessage);\n          this.time = 5;\n          const timer = setInterval(() => {\n            if (this.time <= 0) {\n              clearInterval(timer);\n            }\n\n            this.time--;\n\n            if (this.time == 0) {\n              this.errorMessage = '';\n            }\n          }, 1000);\n        }\n      });\n    }\n\n  }\n\n  CreateComponent.ɵfac = function CreateComponent_Factory(t) {\n    return new (t || CreateComponent)(i0.ɵɵdirectiveInject(i1.ContentService), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n\n  CreateComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CreateComponent,\n    selectors: [[\"app-create\"]],\n    decls: 25,\n    vars: 4,\n    consts: [[4, \"ngIf\"], [1, \"createPhoto-form\", 3, \"ngSubmit\"], [\"form\", \"ngForm\"], [\"for\", \"title\"], [\"ngModel\", \"\", \"type\", \"text\", \"name\", \"title\", \"placeholder\", \"Photo name\", \"value\", \"\", \"required\", \"\"], [\"titleInput\", \"ngModel\"], [\"for\", \"description\"], [\"ngModel\", \"\", \"name\", \"description\", \"placeholder\", \"Description\", \"required\", \"\"], [\"descriptionInput\", \"ngModel\"], [\"for\", \"imageUrl\"], [\"ngModel\", \"\", \"name\", \"imageUrl\", \"type\", \"text\", \"placeholder\", \"Photo Url\", \"value\", \"\", \"required\", \"\", \"pattern\", \"^http[s]?://.*\"], [\"imageUrlInput\", \"ngModel\"], [1, \"btn\"], [1, \"notifications\", \"error\"], [\"class\", \"errortext\", 4, \"ngIf\"], [1, \"errortext\"]],\n    template: function CreateComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r12 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵtemplate(0, CreateComponent_ng_container_0_Template, 6, 2, \"ng-container\", 0);\n        i0.ɵɵelementStart(1, \"form\", 1, 2);\n        i0.ɵɵlistener(\"ngSubmit\", function CreateComponent_Template_form_ngSubmit_1_listener() {\n          i0.ɵɵrestoreView(_r12);\n\n          const _r1 = i0.ɵɵreference(2);\n\n          return ctx.create(_r1);\n        });\n        i0.ɵɵelementStart(3, \"h1\");\n        i0.ɵɵtext(4, \"Share photo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\");\n        i0.ɵɵelementStart(6, \"label\", 3);\n        i0.ɵɵtext(7, \"Photo title:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(8, \"input\", 4, 5);\n        i0.ɵɵtemplate(10, CreateComponent_ng_container_10_Template, 2, 1, \"ng-container\", 0);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\");\n        i0.ɵɵelementStart(12, \"label\", 6);\n        i0.ɵɵtext(13, \"Photo Description:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(14, \"textarea\", 7, 8);\n        i0.ɵɵtemplate(16, CreateComponent_ng_container_16_Template, 2, 1, \"ng-container\", 0);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\");\n        i0.ɵɵelementStart(18, \"label\", 9);\n        i0.ɵɵtext(19, \"Photo url:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(20, \"input\", 10, 11);\n        i0.ɵɵtemplate(22, CreateComponent_ng_container_22_Template, 3, 2, \"ng-container\", 0);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"button\", 12);\n        i0.ɵɵtext(24, \"Share\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        const _r2 = i0.ɵɵreference(9);\n\n        const _r4 = i0.ɵɵreference(15);\n\n        const _r6 = i0.ɵɵreference(21);\n\n        i0.ɵɵproperty(\"ngIf\", ctx.errorMessage.length != 0);\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngIf\", _r2.touched);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", _r4.touched);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", _r6.touched);\n      }\n    },\n    directives: [i4.NgIf, i5.ɵNgNoValidate, i5.NgControlStatusGroup, i5.NgForm, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgModel, i5.RequiredValidator, i5.PatternValidator],\n    styles: [\"form[_ngcontent-%COMP%]{max-width:40em;min-width:15em;background-color:hsla(0,0%,100%,.849);border-radius:1rem;margin:3em auto;display:flex;flex-direction:column;padding:1em;box-shadow:2px 10px 1.5em 5px #000}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:auto;font-size:2em;text-transform:uppercase;color:#000}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:1em 1em 0;display:flex;flex-direction:column}label[_ngcontent-%COMP%]{margin:0 0 .2em;color:#000;font-size:1.5rem}input[_ngcontent-%COMP%]{text-decoration:inherit;background-color:initial;border:none;border-bottom:2px solid #07011f;font-family:system-ui;font-size:1rem;padding:.5rem 1.5rem}form[_ngcontent-%COMP%]   button.btn[_ngcontent-%COMP%]{margin:1em;padding:.5rem;border:none;border-radius:.5em;font-size:1.2rem;box-sizing:2px 2px 2px #000}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:rgba(0,128,0,.562)}.success[_ngcontent-%COMP%]{border-color:green;background-color:rgba(4,88,4,.719)}.loading[_ngcontent-%COMP%]{border-color:rgba(8,144,255,.973);background-color:rgba(1,73,133,.973)}.btn[_ngcontent-%COMP%]{border-radius:.3em;padding:.1em .3em;color:#000;box-shadow:2px 2px 5px rgba(0,0,0,.568)}.btn-register[_ngcontent-%COMP%]{padding:.8em 3.9em;color:#000;font-family:Calibri Italic}.btn-home[_ngcontent-%COMP%], .btn-register[_ngcontent-%COMP%]{display:inline-block;border-radius:.3em;margin-top:1em;box-shadow:2px 2px 5px rgba(0,0,0,.568)}.btn-home[_ngcontent-%COMP%]{padding:.2em 2.9em;color:#fff;font-family:Calibri;font-size:40px}.btn-home[_ngcontent-%COMP%]:hover, .btn-register[_ngcontent-%COMP%]:hover{color:#fff;background-color:rgba(0,0,0,.568)}.btn-home[_ngcontent-%COMP%]:hover{color:#fa4c29}.btn[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:rgba(0,0,0,.329);color:#fff}.errortext[_ngcontent-%COMP%]{background-color:initial;font-family:system-ui;font-size:1rem;color:#b90909}.notifications[_ngcontent-%COMP%]{margin:2em;padding:1em;position:absolute;right:0;width:20em;border:2px solid;border-image-slice:1;border-radius:1em;color:#fff}.error[_ngcontent-%COMP%]{background-color:rgba(245,58,136,.568);border-color:rgba(255,0,0,.315)}\"]\n  });\n  return CreateComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}